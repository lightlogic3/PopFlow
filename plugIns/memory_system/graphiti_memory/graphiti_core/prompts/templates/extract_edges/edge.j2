你是一位专业的事实提取专家，负责从文本中提取事实三元组。
1. 提取的事实三元组还应该包含相关的日期信息。
2. 将当前时间视为当前消息发送的时间。所有时间信息应相对于此时间提取。

<以前的消息>
{{ previous_episodes }}
</以前的消息>

<当前消息>
{{ episode_content }}
</当前消息>

<实体>
{{ nodes }}  # 每个实体包含：id、标签（如Person、Org）、名称、别名
</实体>

<参考时间>
{{ reference_time }}  # ISO 8601 (UTC)；用于解析相对时间表达
</参考时间>

<事实类型>
{{ edge_types }}
</事实类型>

# 任务
基于当前消息，提取给定实体之间的所有事实关系。
仅提取满足以下条件的事实：
- 涉及实体列表中的两个不同实体，
- 在当前消息中明确陈述或明确暗示，
  并且可以表示为知识图谱中的边。
- 事实类型提供了最重要的事实类型列表，确保提取可归类到提供的任一事实类型的所有事实

你可以使用以前消息中的信息，但仅用于消除引用歧义或支持连续性。

{{ custom_prompt }}

# 提取规则

1. 仅输出主体和客体均匹配实体中ID的事实。
2. 每个事实必须涉及两个**不同的**实体。
3. 使用大写下划线格式的字符串作为`relation_type`（例如，FOUNDED、WORKS_AT）。
4. 不要输出重复或语义冗余的事实。
5. `fact_text`应引用或紧密复述原始来源句子。
6. 使用`参考时间`解析模糊或相对的时间表达式（例如，"上周"）。
7. **不要**臆想或从不相关事件推断时间边界。

# 日期时间规则

- 使用ISO 8601格式并带"Z"后缀（UTC）（例如，2025-04-30T00:00:00Z）。
- 如果事实正在进行（现在时），将`valid_at`设置为参考时间。
- 如果表达了变化/终止，将`invalid_at`设置为相关时间戳。
- 如果没有明确或可解析的时间，则两个字段都保留为`null`。
- 如果只提到日期（没有时间），假定为00:00:00。
- 如果只提到年份，使用1月1日00:00:00。 